[gd_scene load_steps=12 format=3 uid="uid://clu31uyaexubi"]

[ext_resource type="SpriteFrames" uid="uid://cqfi15u10qqc5" path="res://game/player/green/green_character.tres" id="1_oul6g"]
[ext_resource type="Script" uid="uid://ciuql8y4w7y84" path="res://game/player/player.gd" id="1_rkbax"]
[ext_resource type="Script" uid="uid://by8ybibhk7qf2" path="res://core/abilities/jump_ability.gd" id="3_5fytw"]
[ext_resource type="AudioStream" uid="uid://bxry0k87j5uc8" path="res://assets/Sounds/sfx_jump.ogg" id="4_yw30f"]
[ext_resource type="Script" uid="uid://cu7plre8tk5ym" path="res://core/state_machine/state_machine.gd" id="5_anr75"]
[ext_resource type="Script" uid="uid://cqfa85wvte8dh" path="res://core/state_machine/states/idle_state.gd" id="6_epvkq"]
[ext_resource type="Script" uid="uid://05mvxmqjpub1" path="res://core/state_machine/states/ducking_state.gd" id="7_5ghna"]

[sub_resource type="Resource" id="Resource_4ste8"]
script = ExtResource("3_5fytw")
_sfx = ExtResource("4_yw30f")
metadata/_custom_type_script = "uid://by8ybibhk7qf2"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kqu6x"]
size = Vector2(36, 69)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g1dw6"]
size = Vector2(48, 58)

[sub_resource type="AudioStreamPolyphonic" id="AudioStreamPolyphonic_5fytw"]

[node name="Player" type="CharacterBody2D" node_paths=PackedStringArray("_spawn_point", "_audio_player")]
script = ExtResource("1_rkbax")
_jump_ability = SubResource("Resource_4ste8")
_spawn_point = NodePath("SpawnPoint")
_audio_player = NodePath("AudioStreamPlayer")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = ExtResource("1_oul6g")
animation = &"duck"

[node name="StandCollisionShape" type="CollisionShape2D" parent="."]
position = Vector2(0, 24.5)
shape = SubResource("RectangleShape2D_kqu6x")

[node name="DuckCollisionShape" type="CollisionShape2D" parent="."]
position = Vector2(0, 30)
shape = SubResource("RectangleShape2D_g1dw6")

[node name="SpawnPoint" type="Marker2D" parent="."]
position = Vector2(48, 32)

[node name="AudioStreamPlayer" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamPolyphonic_5fytw")
autoplay = true
bus = &"Sfx"

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("default_state")]
script = ExtResource("5_anr75")
default_state = NodePath("IdleState")
metadata/_custom_type_script = "uid://cu7plre8tk5ym"

[node name="IdleState" type="Node" parent="StateMachine" node_paths=PackedStringArray("_animated_sprite", "_duck_state")]
script = ExtResource("6_epvkq")
_animated_sprite = NodePath("../../AnimatedSprite2D")
_duck_state = NodePath("../DuckingState")
metadata/_custom_type_script = "uid://cqfa85wvte8dh"

[node name="DuckingState" type="Node" parent="StateMachine" node_paths=PackedStringArray("_animated_sprite", "_duck_collider", "_stand_collider", "_idle_state")]
script = ExtResource("7_5ghna")
_animated_sprite = NodePath("../../AnimatedSprite2D")
_duck_collider = NodePath("../../DuckCollisionShape")
_stand_collider = NodePath("../../StandCollisionShape")
_idle_state = NodePath("../IdleState")
metadata/_custom_type_script = "uid://05mvxmqjpub1"
